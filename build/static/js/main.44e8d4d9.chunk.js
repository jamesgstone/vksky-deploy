(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{17:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(19),s=n.n(r),o=(n(27),n(6)),i=n(4),l=n(2),u=n.n(l),j=n(5),d=n(3),b=(n(29),n(0));var h=function(e){var t="card "+e.className;return Object(b.jsx)("div",{className:t,children:e.children})};n(17);function p(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(d.a)(r,2),l=s[0],p=s[1],O=Object(a.useState)(""),f=Object(d.a)(O,2),g=f[0],x=f[1],v=Object(a.useState)(""),m=Object(d.a)(v,2),S=m[0],y=m[1],w=Object(a.useState)(""),N=Object(d.a)(w,2),k=N[0],C=N[1],D=Object(a.useState)(""),F=Object(d.a)(D,2),A=F[0],_=F[1],I=Object(a.useState)(""),E=Object(d.a)(I,2),J=E[0],U=E[1],V=Object(i.e)(),L=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/vacations",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({title:n,destination:l,description:g,imgUrl:S,startDate:k,endDate:A,price:J}),credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log(a),a.err?alert(a.msg):V.push("/login");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(h,{className:"register",children:Object(b.jsxs)("div",{className:"register_items",children:[Object(b.jsx)("input",{type:"text",placeholder:"Title",onChange:function(e){return c(e.target.value)}}),Object(b.jsx)("input",{type:"text",placeholder:"Destination",onChange:function(e){return p(e.target.value)}}),Object(b.jsx)("input",{type:"text",placeholder:"Descriptione",onChange:function(e){return x(e.target.value)}}),Object(b.jsx)("input",{type:"text",placeholder:"Image url",onChange:function(e){return y(e.target.value)}}),Object(b.jsx)("input",{type:"date",placeholder:"Start Date",onChange:function(e){return C(e.target.value)}}),Object(b.jsx)("input",{type:"date",placeholder:"Start Date",onChange:function(e){return _(e.target.value)}}),Object(b.jsx)("input",{type:"number",placeholder:"Price",onChange:function(e){return U(e.target.value)}}),Object(b.jsx)("button",{onClick:L,children:"Add Vacation"}),Object(b.jsx)(o.b,{className:"navlink",to:"/",children:"Back to Main"})]})})}function O(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(d.a)(r,2),l=s[0],p=s[1],O=Object(a.useState)(""),f=Object(d.a)(O,2),g=f[0],x=f[1],v=Object(a.useState)(""),m=Object(d.a)(v,2),S=m[0],y=m[1],w=Object(a.useState)(""),N=Object(d.a)(w,2),k=N[0],C=N[1],D=Object(a.useState)(""),F=Object(d.a)(D,2),A=F[0],_=F[1],I=Object(a.useState)(""),E=Object(d.a)(I,2),J=E[0],U=E[1],V=(Object(i.e)(),Object(i.f)().id);Object(a.useEffect)((function(){L()}),[]);var L=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/vacations/".concat(V),{method:"get",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n[0],console.log(a),c(a.title),p(a.destination),x(a.description),y(a.imgUrl),C(a.startDate.split("T")[0]),_(a.endDate.split("T")[0]),U(a.price);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/vacations/edit/".concat(V),{method:"post",credentials:"include",body:JSON.stringify({title:n,destination:l,description:g,imgUrl:S,startDate:k,endDate:A,price:J}),headers:{"content-type":"application/json"}});case 2:t=e.sent,t.json();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(h,{className:"register",children:Object(b.jsxs)("div",{className:"register_items",children:[Object(b.jsx)("input",{type:"text",placeholder:"Title",value:n,onChange:function(e){return c(e.target.value)}}),Object(b.jsx)("input",{type:"text",placeholder:"Destination",value:l,onChange:function(e){return p(e.target.value)}}),Object(b.jsx)("input",{type:"text",placeholder:"Description",value:g,onChange:function(e){return x(e.target.value)}}),Object(b.jsx)("input",{type:"text",placeholder:"Image url",value:S,onChange:function(e){return y(e.target.value)}}),Object(b.jsx)("input",{type:"date",placeholder:"Start Date",value:k,onChange:function(e){return C(e.target.value)}}),Object(b.jsx)("input",{type:"date",placeholder:"End Date",value:A,onChange:function(e){return _(e.target.value)}}),Object(b.jsx)("input",{type:"number",placeholder:"Price",value:J,onChange:function(e){return U(e.target.value)}}),Object(b.jsx)("button",{onClick:T,children:"Edit Vacation"}),Object(b.jsx)(o.b,{className:"navlink",to:"/",children:"Back to Main"})]})})}n(39);function f(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(d.a)(r,2),l=s[0],p=s[1],O=Object(i.e)();Object(a.useEffect)((function(){localStorage.role&&O.push("/")}),[]);var f=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/users/login",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:l}),credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log("DATAAAAA",a),a.err?alert(a.msg):(localStorage.user=JSON.stringify(a),localStorage.username=a.username,localStorage.role=a.role,localStorage.firstname=a.firstname,localStorage.lastname=a.lastname,O.push("/"));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(h,{className:"login",children:Object(b.jsxs)("div",{className:"login_items",children:[Object(b.jsx)("input",{type:"text",placeholder:"user name",onChange:function(e){return c(e.target.value)}}),Object(b.jsx)("input",{type:"password",placeholder:"password",onChange:function(e){return p(e.target.value)}}),Object(b.jsx)("button",{onClick:f,children:"Login"}),Object(b.jsx)(o.b,{className:"navlink",to:"/register",children:"Don't have an account yet?"})]})})}n(40),n(41);function g(e){var t=new Date(e.date),n=t.toLocaleString("en-US",{month:"long"}),a=t.getFullYear(),c=t.toLocaleString("en-US",{day:"2-digit"});return Object(b.jsxs)("div",{className:"vacation-date",children:[Object(b.jsx)("div",{className:"vacation-date__month",children:n}),Object(b.jsx)("div",{className:"vacation-date__year",children:a}),Object(b.jsx)("div",{className:"vacation-date__day",children:c})]})}function x(e){var t=e.vacation,n=e.follows,a=e.getFollows,c=e.user,r=e.getVacations,s=n.find((function(e){return e.userID==c.id&&e.vacID==t.id})),i=function(){var e=Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/vacations/follow/"+t.id,{method:"post",credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent.msg&&console.log("vacation followed"),a();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/vacations/unfollow/"+s.id,{method:"post",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:e.sent.msg&&console.log("vacation unfollowed"),a();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/vacations/".concat(t.id),{method:"delete",credentials:"include"});case 2:e.sent,r();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"vacation",children:Object(b.jsxs)(h,{className:"vacation-item",children:[Object(b.jsxs)("div",{className:"",children:[Object(b.jsx)("h1",{className:"vacation-item",children:t.title}),Object(b.jsx)("h2",{className:"vacation-item",children:t.description}),Object(b.jsx)("h2",{className:"vacation-item",children:t.destination})]}),Object(b.jsx)("img",{className:"vacation-item",src:t.imgUrl,alt:"location Image",height:"200",width:"444"}),Object(b.jsxs)("div",{className:"",children:[Object(b.jsxs)("h2",{className:"vacation-item__price",children:["$",t.price," only!"]}),Object(b.jsx)(g,{date:t.startDate}),Object(b.jsx)(g,{date:t.endDate}),"Admin"!=localStorage.role&&!s&&Object(b.jsx)("button",{onClick:i,children:"User"===localStorage.role?"follow the Vacation":"Please login"}),"Admin"!=localStorage.role&&s&&Object(b.jsx)("button",{onClick:l,children:"User"===localStorage.role?"unfollow the Vacation":"Please login"}),"Admin"==localStorage.role&&Object(b.jsx)("button",{onClick:d,children:"X"}),"Admin"==localStorage.role&&Object(b.jsx)(o.b,{to:"/edit/"+t.id,children:"edit"})]})]})})}n(42);var v=n(22),m=(n(43),function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){r()}),[]);var r=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/admin/reports",{method:"get",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,c(a),console.log(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log("data report: "+n);var s={labels:n.labels,datasets:[{label:"Vacation Followers",data:n.values,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)","rgba(201, 203, 207, 0.2)"],borderColor:["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(201, 203, 207)"],borderWidth:1}]};return Object(b.jsx)("div",{className:"rep",children:Object(b.jsxs)(h,{children:[Object(b.jsx)("div",{className:"mainRep",children:Object(b.jsx)(v.a,{data:s,height:"90vh"})}),Object(b.jsx)(o.b,{className:"navlink",to:"/",children:"Back to Main"})]})})});function S(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),s=Object(d.a)(r,2),l=s[0],p=s[1],O=Object(a.useState)([]),f=Object(d.a)(O,2),g=f[0],v=f[1],m=JSON.parse(localStorage.getItem("user")),S=Object(i.e)();Object(a.useEffect)((function(){y(),k()}),[]),Object(a.useEffect)((function(){w()}),[g]);var y=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/vacations",{method:"get",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.length){e.next=3;break}return y(),e.abrupt("return");case 3:return e.next=5,fetch("/vacations/search/".concat(g),{method:"get",credentials:"include"});case 5:return t=e.sent,e.next=8,t.json();case 8:n=e.sent,c(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/users/logout",{method:"delete",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:e.sent.msg&&(localStorage.removeItem("role"),localStorage.removeItem("username"),S.push("/login"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/follows",{method:"get",credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,p(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)(h,{className:"main_header",children:Object(b.jsxs)("div",{className:"main_header_items",children:[Object(b.jsxs)("h1",{children:["Hello"," ",localStorage.role?localStorage.firstname+" "+localStorage.lastname:"guest! you must login to see our wiskey Vacations"]}),Object(b.jsx)("input",{type:"text",placeholder:"Search Destination",onInput:function(e){return v(e.target.value)}}),Object(b.jsxs)("ul",{children:[localStorage.role?null:Object(b.jsxs)("div",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(o.b,{to:"/login",children:"Login"})}),Object(b.jsx)("li",{children:Object(b.jsx)(o.b,{to:"/register",children:"Register"})})]}),"Admin"===localStorage.role&&Object(b.jsx)("button",{children:Object(b.jsx)(o.b,{to:"/add",children:"Add New vacation"})}),"Admin"===localStorage.role&&Object(b.jsx)("button",{children:Object(b.jsx)(o.b,{to:"/report",children:"See Report"})}),console.log("FFFFFFFFFFFFF",localStorage.role),localStorage.role&&Object(b.jsx)("button",{onClick:N,children:"Logout"})]})]})}),Object(b.jsx)(h,{className:"main",children:n.length?function(){var e=l.map((function(e){if(e.userID==m.id)return e.vacID})),t=n.sort((function(t,n){return e.indexOf(t.id)-e.indexOf(n.id)}));return t.reverse(),t}().map((function(e,t){return Object(b.jsx)(x,{vacation:e,follows:l,getVacations:y,getFollows:function(){k()},user:m},"vacation-"+t)})):Object(b.jsx)("h1",{children:"No vacations Yet \ud83e\udd74"})})]})}function y(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(789),s=Object(d.a)(r,2),o=s[0],i=s[1];return Object(a.useEffect)((function(){fetch("/users/profile",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return c(e)}))}),[o]),Object(b.jsx)("div",{children:n.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:e.name}),Object(b.jsx)("h2",{children:e.artist}),Object(b.jsx)("button",{onClick:Object(j.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/vacations/cancel/"+e.id,{method:"post",credentials:"include"});case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,console.log(a),i(o+1);case 8:case"end":return t.stop()}}),t)}))),children:"X"})]})}))})}function w(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(d.a)(r,2),l=s[0],p=s[1],O=Object(a.useState)(""),f=Object(d.a)(O,2),g=f[0],x=f[1],v=Object(a.useState)(""),m=Object(d.a)(v,2),S=m[0],y=m[1],w=Object(i.e)(),N=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/users/register",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({firstname:n,lastname:l,username:g,password:S}),credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log(a),a.err?alert(a.msg):w.push("/login");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(h,{className:"register",children:Object(b.jsxs)("div",{className:"register_items",children:[Object(b.jsx)("input",{type:"text",placeholder:"first name",onChange:function(e){return c(e.target.value)}}),Object(b.jsx)("input",{type:"text",placeholder:"last name",onChange:function(e){return p(e.target.value)}}),Object(b.jsx)("input",{type:"text",placeholder:"user name",onChange:function(e){return x(e.target.value)}}),Object(b.jsx)("input",{type:"password",placeholder:"password",onChange:function(e){return y(e.target.value)}}),Object(b.jsx)("button",{onClick:N,children:"Register"}),Object(b.jsx)(o.b,{className:"navlink",to:"/login",children:"Already have an account?"})]})})}function N(){return Object(b.jsx)(o.a,{children:Object(b.jsxs)("div",{children:[Object(b.jsx)(i.a,{path:"/",exact:!0,component:S}),Object(b.jsx)(i.a,{path:"/login",component:f}),Object(b.jsx)(i.a,{path:"/register",component:w}),Object(b.jsx)(i.a,{path:"/profile",component:y}),Object(b.jsx)(i.a,{path:"/add",component:p}),Object(b.jsx)(i.a,{path:"/edit/:id",component:O}),Object(b.jsx)(i.a,{path:"/report",component:m})]})})}var k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(N,{})}),document.getElementById("root")),k()}},[[44,1,2]]]);
//# sourceMappingURL=main.44e8d4d9.chunk.js.map